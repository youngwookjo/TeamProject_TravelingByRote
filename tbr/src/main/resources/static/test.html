<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      let data;
      searchbytype = typeid =>
        axios
          .get("http://127.0.0.1:8000/searchByType?typeId=" + typeid)
          .then(resData => {
            data = resData.data;
            console.log(resData.data);
            drawtable("타입 검색", resData.data);
          })
          .catch(error => {
            console.log("비정상 응답", error);
          });
      searchbykwd = kwd =>
        axios
          .get("http://127.0.0.1:8000/searchByKeyword?kwd=" + kwd)
          .then(resData => {
            data = resData.data;
            console.log(data);
            drawtable("키워드 검색", resData.data);
          })
          .catch(error => {
            console.log("비정상 응답", error);
          });
      searchbydistance = id =>
        axios
          .get("http://127.0.0.1:8000/searchByDistance?id="+id+"&typeId="+document.all.typeselect.value+"&distance=4")
          .then(resData => {
            console.log(resData);
            data = resData.data;
            console.log(data);
          })
          .catch(error => {
            console.log("비정상 응답", error);
          });
      function drawtable(option, tdata) {
        document.all.result.innerHTML = "<h3>" + option + "</<h3>";
        let table = `<table border=1><tr><td width=240px><b>사진</b></td>
	                <td width=120px><b>이름</b></td><td width=120px><b>주소</b></td><td><b>설명</b></td></tr>`;
        for (let row of tdata) {
          console.log(row);
          table +=
            "<tr><td><img width=240px src=" +
            row.img.replace("static/", "") +
            "></td><td>" +
            row.name +
            "</td><td>" +
            row.address +
            "</td><td>" +
            row.description +
            "</td></tr>";
        }
        table += "</table>";
        document.all.result.innerHTML += table;
      }
    </script>
    <br />
    <div>
      <select id="typeselect" name="contenttypeid">
        <option value="" selected="selected">타입선택</option>
        <option value="12">관광지</option>
        <option value="14">문화시설</option>
        <option value="15">축제공연행사</option>
        <option value="25">여행코스</option>
        <option value="28">레포츠</option>
        <option value="32">숙박</option>
        <option value="38">쇼핑</option>
        <option value="39">음식점</option>
      </select>
      <button onclick="searchbytype(document.all.typeselect.value)">
        타입 검색
      </button>
    </div>
    <br />
    <div>
      <input id="kwdinput" type="text" />
      <button onclick="searchbykwd(document.all.kwdinput.value)">
        키워드 검색
      </button>
    </div>
    <br />
    <hr />
    <br />
    <div id="result">[결과]</div>
  </body>
</html>